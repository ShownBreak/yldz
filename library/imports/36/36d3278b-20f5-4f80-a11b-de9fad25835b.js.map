{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\gameover.js"],"names":["common","require","door","cc","Class","extends","Component","properties","label_tittle","default","type","Label","label_time","label_leijitime","backBtn","Node","continueBtn","success","defeat","success_btn","defeat_btn","rank_btn","wxupdate","score","num_door","CC_WECHATGAME","window","wx","postMessage","messageType","MAIN_MENU_NUM","log","onLoad","director","preloadScene","find","scaleTo","reverse","seq","sequence","repeat","repeatForever","on","loadScene","lastest_door","setStorageSync","shareAppMessage","title","imageUrl","res","console","showToast","icon","fail","score_now","is_Success","active","runAction","getComponent","string","haoshi","userData_time1","parseInt","getStorageSync","youtime","userData_time2","youtime1","ppppp"],"mappings":"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","file":"gameover.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["var common = require(\"common\");\r\nvar door = require(\"door\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n         label_tittle:{\r\n           default:null,\r\n           type:cc.Label\r\n        },\r\n         label_time:{\r\n           default:null,\r\n           type:cc.Label\r\n        },\r\n        label_leijitime:{\r\n           default:null,\r\n           type:cc.Label\r\n        },\r\n        backBtn:{\r\n           default:null,\r\n           type:cc.Node\r\n       },\r\n       continueBtn:{\r\n           default:null,\r\n           type:cc.Node\r\n       },\r\n       success:{\r\n           default:null,\r\n           type:cc.Node\r\n       },\r\n       defeat:{\r\n           default:null,\r\n           type:cc.Node\r\n       },\r\n       success_btn:{\r\n           default:null,\r\n           type:cc.Node\r\n       },\r\n       defeat_btn:{\r\n           default:null,\r\n           type:cc.Node\r\n       },\r\n       rank_btn:{\r\n           default:null,\r\n           type:cc.Node\r\n       },\r\n    \r\n    },\r\n    wxupdate:function(){\r\n       let score = common.num_door;\r\n        if (CC_WECHATGAME) {\r\n            window.wx.postMessage({\r\n                messageType: 3,\r\n                MAIN_MENU_NUM: \"x1\",\r\n                score: score,\r\n            });\r\n        } else {\r\n            cc.log(\"提交得分: x1 : \" + score)\r\n        }\r\n    },\r\n   \r\n    onLoad () {\r\n        \r\n        cc.director.preloadScene(\"main\");\r\n        cc.director.preloadScene(\"success\");\r\n        cc.director.preloadScene(\"welcome\");\r\n        cc.director.preloadScene(\"rank\");\r\n        this.label_tittle = cc.find(\"Canvas/tittle\");\r\n        this.label_time   = cc.find(\"Canvas/time\");   \r\n        this.label_leijitime   = cc.find(\"Canvas/leijitime\");      \r\n        var scaleTo = cc.scaleTo(0.8,0.9);\r\n        var reverse = cc.scaleTo(0.8,1);\r\n        var seq = cc.sequence(scaleTo,reverse);\r\n        var repeat = cc.repeatForever(seq);        \r\n        this.rank_btn.on(\"touchstart\",function(){\r\n          if (CC_WECHATGAME) {\r\n            // 发消息给子域\r\n                window.wx.postMessage({\r\n                    messageType: 1,\r\n                    MAIN_MENU_NUM: \"x1\"\r\n                });\r\n            } else {\r\n                cc.log(\"获取好友排行榜数据。x1\");\r\n            }\r\n             cc.director.loadScene(\"rank\");\r\n        });\r\n        this.backBtn.on(\"touchstart\",function(){\r\n             cc.director.loadScene(\"welcome\");\r\n        });\r\n        this.continueBtn.on(\"touchstart\",function(){\r\n            //this.initgame();\r\n            if(common.num_door<common.lastest_door)\r\n              cc.director.loadScene(\"main\");\r\n            else{\r\n              common.num_door = 0;\r\n              wx.setStorageSync('time', 0);\r\n              cc.director.loadScene(\"success\");\r\n            }  \r\n        });\r\n        this.success_btn.on(\"touchstart\",function(){\r\n            //this.initgame();\r\n            cc.log(\"转发\");\r\n            wx.shareAppMessage({\r\n                    title: \"@我 我已经达到第\"+common.num_door+\"关了，你敢挑战我吗？\",\r\n                    imageUrl: \"https://www.ldfangqi.cn/yinlidanzhures/res/tupian/share.png\",\r\n                    success(res){\r\n                        console.log(\"转发成功!!!\");\r\n                        wx.showToast({\r\n                          title: '转发成功',\r\n                          icon: 'success'\r\n                        });\r\n                    },\r\n                    fail(res){\r\n                        console.log(\"转发失败\");\r\n                        wx.showToast({\r\n                          title: '转发失败',\r\n                          icon: 'none'\r\n                        });\r\n                    } \r\n            });\r\n         });\r\n        this.defeat_btn.on(\"touchstart\",function(){\r\n            //this.initgame();\r\n            cc.log(\"转发\");\r\n            var score_now = common.num_door+1;\r\n            wx.shareAppMessage({\r\n                    title: \"@我 我卡在第\"+score_now+\"关了，快来帮帮我吧\",\r\n                    imageUrl: \"https://www.ldfangqi.cn/yinlidanzhures/res/tupian/share.png\",\r\n                    success(res){\r\n                        console.log(\"转发成功!!!\");\r\n                        wx.showToast({\r\n                          title: '转发成功',\r\n                          icon: 'success'\r\n                        });\r\n                        common.num_door++;\r\n                        this.wxupdate();\r\n                    },\r\n                    fail(res){\r\n                        console.log(\"转发失败\");\r\n                        wx.showToast({\r\n                          title: '转发失败',\r\n                          icon: 'none'\r\n                        });\r\n                    } \r\n            });\r\n         });\r\n        if(common.is_Success == 0){\r\n            this.success.active = false;\r\n            this.defeat.active = true;\r\n            this.success_btn.active = false;\r\n            this.defeat_btn.active = false;//后续视频接口需要修改这里\r\n            this.defeat_btn.runAction(repeat);\r\n            this.label_tittle.getComponent(cc.Label).string = \"失败\";\r\n            this.label_time.getComponent(cc.Label).string =  common.haoshi+\" s\";\r\n            var userData_time1 = parseInt(wx.getStorageSync('time'));\r\n            var youtime = userData_time1+common.haoshi;\r\n            this.label_leijitime.getComponent(cc.Label).string =  +youtime+\" s\";\r\n            wx.setStorageSync('time', youtime);\r\n            //this.label_tittle.getComponent(cc.Label).color = new cc.color(239,9,47,255);\r\n        }else{\r\n            this.success.active = true;\r\n            this.defeat.active = false;\r\n            this.success_btn.active = true;\r\n            this.defeat_btn.active = false;\r\n            this.success_btn.runAction(repeat);\r\n            this.label_tittle.getComponent(cc.Label).string = \"成功\";\r\n            this.label_time.getComponent(cc.Label).string =  common.haoshi+\" s\";\r\n            // this.label_tittle.getComponent(cc.Label).color = new cc.color(5,26,127,255);\r\n            common.num_door++;\r\n            this.wxupdate();\r\n            var userData_time2 = parseInt(wx.getStorageSync('time'));\r\n            var youtime1 = userData_time2+common.haoshi;\r\n            this.label_leijitime.getComponent(cc.Label).string = youtime1+\" s\";\r\n            wx.setStorageSync('time', youtime1);\r\n            if(common.num_door>=parseInt(wx.getStorageSync('level')))\r\n              wx.setStorageSync('level', common.num_door);\r\n            else{\r\n              if(common.ppppp == 0)\r\n                common.num_door = parseInt(wx.getStorageSync('level'));\r\n            }\r\n        } \r\n\r\n    },\r\n     \r\n});\r\n"]}