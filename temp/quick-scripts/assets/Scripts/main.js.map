{"version":3,"sources":["main.js"],"names":["common","require","door","cc","Class","extends","Component","properties","player","default","type","Node","sun","titleboard","mianbanboard","restart","back","zhengE","Prefab","timeLabe","Label","yinliLabe","nameLabe","block","block1","block2","block3","block4","block5","block6","temp","createnum","parseInt","Math","random","initgame","that","num_door","lastest_door","director","loadScene","center_x","center_y","Speed_X","Speed_Y","is_Success","haoshi","playTime","guanqia","num_yinli","length_array","array_bolck","length","setPosition","v2","player_location","sun_location","i","x_block","x","y_block","y","Newblock","instantiate","node","addChild","setRotation","where","mean_array","array1","a","sum","setJumpAction","x1","y1","x2","y2","dist","sub","mag","time","jumpUp","moveTo","easing","easeQuadraticActionIn","jumpDown","easeQuadraticActionOut","jumpDownzero","repeatForever","sequence","onLoad","find","preloadScene","windowSize","view","getVisibleSize","height","getComponent","string","name_guanqia","mianbanboard_Action","easeCubicActionOut","runAction","titleboard_Action","on","event","target","getCurrentTarget","locationInNode","convertToNodeSpaceAR","getLocation","getBoundingBoxToWorld","contains","NewzhengE","push","ctx","getChildByName","Graphics","clear","begin_x","begin_y","start","schedule","eventManager","removeListener","listener","update","dt","c_x","c_y","getPhysicsManager","gravity","lineTo","stroke"],"mappings":"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","file":"main.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["var common = require(\"common\");\r\nvar door = require(\"door\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        player:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        sun:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        titleboard:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        mianbanboard:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        restart:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        back:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n     \r\n        zhengE:{\r\n          default:null,\r\n          type:cc.Prefab\r\n        },\r\n        timeLabe:{\r\n           default:null,\r\n           type:cc.Label\r\n        },\r\n        yinliLabe:{\r\n           default:null,\r\n           type:cc.Label\r\n        },\r\n        nameLabe:{\r\n           default:null,\r\n           type:cc.Label\r\n        },\r\n        block:{\r\n          default:null,\r\n          type:cc.Prefab\r\n        },\r\n        block1:{\r\n          default:null,\r\n          type:cc.Prefab\r\n        },\r\n        block2:{\r\n          default:null,\r\n          type:cc.Prefab\r\n        },\r\n        block3:{\r\n          default:null,\r\n          type:cc.Prefab\r\n        },\r\n        block4:{\r\n          default:null,\r\n          type:cc.Prefab\r\n        },\r\n        block5:{\r\n          default:null,\r\n          type:cc.Prefab\r\n        },\r\n        block6:{\r\n          default:null,\r\n          type:cc.Prefab\r\n        }, \r\n        temp:0,  \r\n         \r\n    },\r\n    createnum:function(){\r\n    \treturn parseInt(Math.random()*6+1,10); \r\n    },\r\n   initgame:function(){\r\n            var that = this;\r\n            //common.num_door = parseInt(wx.getStorageSync('level'));\r\n            if(common.num_door>=common.lastest_door)\r\n              cc.director.loadScene(\"success\");\r\n                                 \r\n            common.center_x=[];\r\n            common.center_y=[];\r\n            common.Speed_X = 0;\r\n            common.Speed_Y = 0;\r\n            common.is_Success = 0;\r\n            common.haoshi = 0;\r\n            common.playTime = door.guanqia[common.num_door].playTime;\r\n            common.num_yinli = door.guanqia[common.num_door].num_yinli;\r\n            that.temp = door.guanqia[common.num_door].num_yinli;\r\n            var length_array = door.guanqia[common.num_door].array_bolck.length;\r\n            that.player.setPosition(cc.v2(door.guanqia[common.num_door].player_location[0],door.guanqia[common.num_door].player_location[1]));\r\n            that.sun.setPosition(cc.v2(door.guanqia[common.num_door].sun_location[0],door.guanqia[common.num_door].sun_location[1]));\r\n            for(var i = 0;i<length_array;i++){\r\n                //if( door.guanqia[common.num_door].array_bolck[i].where)\r\n                var x_block = door.guanqia[common.num_door].array_bolck[i].x;\r\n                var y_block = door.guanqia[common.num_door].array_bolck[i].y;\r\n                switch(that.createnum()){\r\n                \tcase 1:\r\n                \t\tthat.Newblock = cc.instantiate(that.block1);\r\n                \t\tbreak;\r\n                \tcase 2:\r\n                \t\tthat.Newblock = cc.instantiate(that.block2);\r\n                \t\tbreak;\r\n                \tcase 3:\r\n                \t\tthat.Newblock = cc.instantiate(that.block3);\r\n                \t\tbreak;\r\n                \tcase 4:\r\n                \t\tthat.Newblock = cc.instantiate(that.block4);\r\n                \t\tbreak;\r\n                \tcase 5:\r\n                \t\tthat.Newblock = cc.instantiate(that.block5);\r\n                \t\tbreak;\r\n                \tcase 6:\r\n                \t\tthat.Newblock = cc.instantiate(that.block6);\r\n                \t\tbreak;\r\n                \tdefault:\r\n                \t\tthat.Newblock = cc.instantiate(that.block);\r\n                \t\tbreak;\r\n                }\r\n               \r\n                that.node.addChild(that.Newblock);\r\n                that.Newblock.setPosition(cc.v2(x_block,y_block));\r\n                that.Newblock.setRotation(door.guanqia[common.num_door].array_bolck[i].where);\r\n            }   \r\n   },\r\n   mean_array:function(array1,a){\r\n        var sum = 0;\r\n        for(var i=0;i<array1.length;i++){\r\n            sum+=array1[i];\r\n        }\r\n        return (sum+a)/(array1.length+1);\r\n   },\r\n   setJumpAction: function(x1,y1,x2,y2){\r\n        var dist = cc.v2(x1,y1).sub(cc.v2(x2,y2)).mag();//Math.sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2));\r\n        var time = dist/150;\r\n        var jumpUp = cc.moveTo(time,cc.v2(x2,y2)).easing(cc.easeQuadraticActionIn());\r\n        var jumpDown = cc.moveTo(time,cc.v2(x2+x2-x1,y2+y2-y1)).easing(cc.easeQuadraticActionOut());\r\n        var jumpDownzero = cc.moveTo(time,cc.v2(x1,y1)).easing(cc.easeQuadraticActionOut());\r\n        return cc.repeatForever(cc.sequence(jumpUp, jumpDown,jumpUp,jumpDownzero));\r\n    },\r\n    onLoad () {\r\n        this.timeLabe = cc.find(\"Canvas/mianban/timebiao/time\");\r\n        this.yinliLabe = cc.find(\"Canvas/mianban/zhengE/yinli\");\r\n        this.nameLabe = cc.find(\"Canvas/titleboard/name\");\r\n        cc.director.preloadScene(\"gameover\");\r\n        cc.director.preloadScene(\"success\");\r\n        cc.director.preloadScene(\"welcome\");\r\n        \r\n        this.initgame();      \r\n        let windowSize=cc.view.getVisibleSize();\r\n        //this.timeLabe.setPosition(cc.v2(-(windowSize.width/2)+20,windowSize.height/2-15));\r\n       \tthis.mianbanboard.setPosition(cc.v2(0,-windowSize.height/2-58));\r\n        this.yinliLabe.getComponent(cc.Label).string = \": \"+common.num_yinli +\" 个\";\r\n        \r\n        this.titleboard.setPosition(cc.v2(0,windowSize.height/2+45));\r\n        this.nameLabe.getComponent(cc.Label).string = door.guanqia[common.num_door].name_guanqia; \r\n        this.timeLabe.getComponent(cc.Label).string = \": \"+common.playTime +\" s\";\r\n\r\n        this.mianbanboard_Action = cc.moveTo(1, cc.v2(0, -windowSize.height/2)).easing(cc.easeCubicActionOut());\r\n        this.mianbanboard.runAction(this.mianbanboard_Action);\r\n\r\n        this.titleboard_Action = cc.moveTo(1, cc.v2(0, windowSize.height/2)).easing(cc.easeCubicActionOut());\r\n        this.titleboard.runAction(this.titleboard_Action);\r\n\r\n\r\n        this.node.on('touchstart',function(event){\r\n            if(common.num_yinli>0){              \r\n                var target = event.getCurrentTarget();//获取事件所绑定的target\r\n                var locationInNode = target.convertToNodeSpaceAR(event.getLocation());\r\n\r\n                if(!this.sun.getBoundingBoxToWorld().contains(event.getLocation())&&!this.titleboard.getBoundingBoxToWorld().contains(event.getLocation())&&!this.mianbanboard.getBoundingBoxToWorld().contains(event.getLocation())){\r\n                    var NewzhengE = cc.instantiate(this.zhengE);\r\n                    this.node.addChild(NewzhengE);\r\n                    NewzhengE.setPosition(cc.v2(locationInNode.x,locationInNode.y));\r\n                    common.center_x.push(locationInNode.x);\r\n                    common.center_y.push(locationInNode.y);\r\n                    common.num_yinli--;\r\n                    this.yinliLabe.getComponent(cc.Label).string = \": \"+common.num_yinli +\" 个\";\r\n                }\r\n            }         \r\n        },this);\r\n\r\n\r\n\r\n\r\n        this.ctx =  this.node.getChildByName(\"tu\").getComponent(cc.Graphics);;\r\n        this.ctx.clear();\r\n       \r\n       this.restart.on(\"touchstart\",function(){\r\n               cc.director.loadScene(\"main\");\r\n        });\r\n       this.back.on(\"touchstart\",function(){\r\n               cc.director.loadScene(\"welcome\");\r\n        });\r\n\r\n        this.begin_x = this.player.x;\r\n        this.begin_y = this.player.y;\r\n    },\r\n    start () {\r\n    \t this.schedule(function(){\r\n            common.playTime--;\r\n            common.haoshi++;\r\n            this.timeLabe.getComponent(cc.Label).string = \": \"+common.playTime +\" s\";\r\n            if(common.playTime < 1){\r\n                common.is_Success = 0;\r\n                cc.eventManager.removeListener(common.listener);\r\n                cc.director.loadScene('gameover');\r\n                this.ctx.clear();\r\n            }\r\n        },1);\r\n    },\r\n    update (dt) {\r\n        if(common.center_x.length > 0){\r\n            var c_x = this.mean_array(common.center_x,this.player.x);\r\n            var c_y = this.mean_array(common.center_y,this.player.y);\r\n            cc.director.getPhysicsManager().gravity = cc.v2((c_x-this.player.x)/2, (c_y-this.player.y)/2);\r\n        }\r\n        \r\n        this.ctx.moveTo(this.begin_x,this.begin_y);\r\n        this.ctx.lineTo(this.player.x,this.player.y);\r\n\r\n        this.begin_x = this.player.x;\r\n        this.begin_y = this.player.y;\r\n        this.ctx.stroke();\r\n    },\r\n    \r\n});\r\n"]}