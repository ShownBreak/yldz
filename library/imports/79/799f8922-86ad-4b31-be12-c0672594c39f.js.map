{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\teach.js"],"names":["common","require","door","cc","Class","extends","Component","properties","dialog_daojishi","default","type","Node","dialog_yinliqiu","dialog_back","dialog_location","dialog_restart","player","sun","zhengE","Prefab","skip","gotogame","titleboard","mianbanboard","mean_array","array1","a","sum","i","length","onLoad","director","preloadScene","getCollisionManager","enabled","getPhysicsManager","gravity","v2","btn","center_x","center_y","active","node","on","event","target","getCurrentTarget","locationInNode","convertToNodeSpaceAR","getLocation","getBoundingBoxToWorld","contains","NewzhengE","instantiate","addChild","setPosition","x","y","push","loadScene","ctx","getChildByName","getComponent","Graphics","clear","begin_x","begin_y","start","update","dt","c_x","c_y","moveTo","lineTo","stroke"],"mappings":"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","file":"teach.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["var common = require(\"common\");\r\nvar door = require(\"door\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        dialog_daojishi:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        dialog_yinliqiu:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        dialog_back:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        dialog_location:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        dialog_restart:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        player:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        sun:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        zhengE:{\r\n          default:null,\r\n          type:cc.Prefab\r\n        },\r\n        skip:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        gotogame:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        titleboard:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n        mianbanboard:{\r\n          default:null,\r\n          type:cc.Node\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    \r\n   mean_array:function(array1,a){\r\n        var sum = 0;\r\n        for(var i=0;i<array1.length;i++){\r\n            sum+=array1[i];\r\n        }\r\n        return (sum+a)/(array1.length+1);\r\n   },\r\n\r\n    onLoad () {\r\n        cc.director.preloadScene(\"main\");\r\n        cc.director.getCollisionManager().enabled=true;\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        cc.director.getPhysicsManager().gravity = cc.v2();\r\n        this.btn = 0;\r\n        common.center_x=[];\r\n        common.center_y=[];\r\n        \r\n        this.gotogame.active = false;\r\n        this.dialog_daojishi.active = false;\r\n        this.dialog_yinliqiu.active = false;\r\n        this.dialog_restart.active = false;\r\n        this.dialog_back.active = false;\r\n        this.dialog_location.active = false;\r\n        this.sun.active = false;\r\n        this.node.on('touchstart',function(event){\r\n            switch(this.btn){\r\n                case 0:\r\n                    this.dialog_daojishi.active = true;\r\n                    this.btn++;\r\n                    break;\r\n                case 1:\r\n                    this.dialog_daojishi.active = false;\r\n                    this.dialog_yinliqiu.active = true;\r\n                    this.btn++;\r\n                    break;\r\n                case 2:\r\n                    this.dialog_yinliqiu.active = false;\r\n                    this.dialog_restart.active = true;\r\n                    this.btn++;\r\n                    break;\r\n                case 3:\r\n                    this.dialog_restart.active = false;\r\n                    this.dialog_back.active = true;\r\n                    this.btn++;\r\n                    break;\r\n                case 4:\r\n                    this.dialog_back.active = false;\r\n                    this.dialog_location.active = true;\r\n                    this.btn++;\r\n                    break;\r\n                case 5:\r\n                    this.gotogame.active = true;\r\n                    \r\n                    this.dialog_location.active = false;              \r\n                    var target = event.getCurrentTarget();//获取事件所绑定的target\r\n                    var locationInNode = target.convertToNodeSpaceAR(event.getLocation());\r\n                    if(!this.sun.getBoundingBoxToWorld().contains(event.getLocation())&&!this.titleboard.getBoundingBoxToWorld().contains(event.getLocation())&&!this.mianbanboard.getBoundingBoxToWorld().contains(event.getLocation())){\r\n                        var NewzhengE = cc.instantiate(this.zhengE);\r\n                        this.node.addChild(NewzhengE);\r\n                        NewzhengE.setPosition(cc.v2(locationInNode.x,locationInNode.y));\r\n                        common.center_x.push(locationInNode.x);\r\n                        common.center_y.push(locationInNode.y); \r\n                        break;\r\n                    }\r\n            }\r\n            \r\n\r\n         },this);  \r\n        this.skip.on(\"touchstart\",function(){\r\n            cc.director.loadScene(\"main\");\r\n        }); \r\n       this.gotogame.on(\"touchstart\",function(){\r\n            cc.director.loadScene(\"main\");\r\n        });\r\n        this.ctx =  this.node.getChildByName(\"tu\").getComponent(cc.Graphics);\r\n        this.ctx.clear(); \r\n        this.begin_x = this.player.x;\r\n        this.begin_y = this.player.y;\r\n    },\r\n    start(){\r\n\r\n        \r\n    },\r\n\r\n    update(dt) {\r\n        if(common.center_x.length > 0){\r\n            var c_x = this.mean_array(common.center_x,this.player.x);\r\n            var c_y = this.mean_array(common.center_y,this.player.y);\r\n            cc.director.getPhysicsManager().gravity = cc.v2((c_x-this.player.x), (c_y-this.player.y));\r\n        }\r\n        \r\n        this.ctx.moveTo(this.begin_x,this.begin_y);\r\n        this.ctx.lineTo(this.player.x,this.player.y);\r\n\r\n        this.begin_x = this.player.x;\r\n        this.begin_y = this.player.y;\r\n        this.ctx.stroke();\r\n    },\r\n});\r\n"]}