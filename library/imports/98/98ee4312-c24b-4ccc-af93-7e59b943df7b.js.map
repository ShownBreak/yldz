{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\welcome.js"],"names":["common","require","door","cc","Class","extends","Component","properties","startBtn","default","type","Node","rank_btn","audio","AudioClip","onLoad","flag","value","wx","getStorageSync","num_door","setStorageSync","e","director","preloadScene","audioEngine","stopAll","current","play","lastest_door","guanqia","length","GameClubButton","createGameClubButton","icon","style","left","top","width","height","showShareMenu","onShareAppMessage","res","title","imageUrl","success","console","log","showToast","fail","scaleTo","reverse","seq","sequence","repeat","repeatForever","runAction","on","loadScene","CC_WECHATGAME","window","postMessage","messageType","MAIN_MENU_NUM","start","onDestroy","destroy"],"mappings":"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","file":"welcome.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["var common = require(\"common\");\r\nvar door = require(\"door\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n       startBtn:{\r\n           default:null,\r\n           type:cc.Node\r\n       },\r\n       rank_btn:{\r\n           default:null,\r\n           type:cc.Node\r\n       },\r\n         audio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        }\r\n    },\r\n  \r\n    onLoad () {  \r\n    \tvar flag = 0;\r\n    \ttry {\r\n\t\t  \tconst value = wx.getStorageSync('level');\r\n\t\t  \tif (value) {\r\n\t              common.num_door = 0;\r\n\t\t\t}else{\r\n\t\t\t\twx.setStorageSync('time', 0)\r\n\t\t\t\twx.setStorageSync('level', 0)\r\n\t           \tflag = 1;\r\n\t           \tcommon.num_door = 0;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t\r\n\t\t}\r\n        \r\n        cc.director.preloadScene(\"main\");\r\n        cc.director.preloadScene(\"rank\");\r\n        cc.director.preloadScene(\"teach\");\r\n        cc.audioEngine.stopAll();\r\n        this.current = cc.audioEngine.play(this.audio, true, 0.2);\r\n        common.lastest_door = door.guanqia.length;//读取共有多少关卡\r\n        \r\n        this.GameClubButton = wx.createGameClubButton({\r\n          icon: 'green',\r\n          style: {\r\n            left: 0,\r\n            top: 100,\r\n            width: 40,\r\n            height: 40\r\n          }\r\n        });\r\n        wx.showShareMenu();\r\n        //监听右上角的分享调用 \r\n        wx.onShareAppMessage(function(res){\r\n            return {\r\n                title: \"@我 这个小游戏真的好火！\",\r\n                imageUrl: \"https://www.ldfangqi.cn/yinlidanzhures/res/tupian/share.png\",\r\n                success(res){\r\n                    console.log(\"转发成功!!!\");\r\n                    wx.showToast({\r\n                        title: '转发成功',\r\n                        icon: 'success'\r\n                    });\r\n                },\r\n                fail(res){\r\n                    console.log(\"转发失败!!!\");\r\n                    wx.showToast({\r\n                        title: '转发失败',\r\n                        icon: 'none'\r\n                    });\r\n                } \r\n            }\r\n        });\r\n        \r\n        var scaleTo = cc.scaleTo(0.8,0.9);\r\n        var reverse = cc.scaleTo(0.8,1);\r\n        var seq = cc.sequence(scaleTo,reverse);\r\n        var repeat = cc.repeatForever(seq);\r\n        this.startBtn.runAction(repeat);\r\n        this.startBtn.on(\"touchstart\",function(){\r\n\t        \r\n        \tif(flag == 1)\r\n        \t\tcc.director.loadScene(\"teach\"); \r\n        \telse\r\n            \tcc.director.loadScene(\"main\"); \r\n        });\r\n        this.rank_btn.on(\"touchstart\",function(){\r\n          if (CC_WECHATGAME) {\r\n            // 发消息给子域\r\n            window.wx.postMessage({\r\n                messageType: 1,\r\n                MAIN_MENU_NUM: \"x1\"\r\n            });\r\n          } else {\r\n            cc.log(\"获取好友排行榜数据。x1\");\r\n          }\r\n            cc.director.loadScene(\"rank\");\r\n        });\r\n    },\r\n    start () {\r\n    },\r\n    onDestroy: function () {\r\n        this.GameClubButton.destroy();\r\n    }\r\n     \r\n});\r\n"]}